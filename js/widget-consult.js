function getCookie(e){const t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?decodeURIComponent(t[2]):null}function setCookie(e,t,o={}){(o={path:"/",...o}).expires instanceof Date&&(o.expires=o.expires.toUTCString());let i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in o){i+="; "+e;let t=o[e];!0!==t&&(i+="="+t)}document.cookie=i}function deleteCookie(e){setCookie(e,"",{"max-age":-1})}window.onload=function(){const e=window.helpers.browser.isTouch()?consultWidgetSettings&&consultWidgetSettings.mobile:consultWidgetSettings&&consultWidgetSettings.desktop;if(e.showEntireWidget>0){const t=1e3*e.showEntireWidget;setTimeout((()=>{$("#consult").show()}),t)}else $("#consult").show();if(e.pagesViewed>0){let e=getCookie("pagesViewed");e?(e=parseInt(e)+1,setCookie("pagesViewed",e)):setCookie("pagesViewed","1")}else deleteCookie("pagesViewed");if(0===e.limitBySession){getCookie("limitBySession")&&deleteCookie("limitBySession")}if(0===e.limitByTime){getCookie("limitByTime")&&deleteCookie("limitByTime")}if(0===e.timeSite){getCookie("timeSite")&&deleteCookie("timeSite")}const t=["vk","wa","vb","tg","call"];setTimeout((()=>{const e={tg:"https://refer.id/?bot=AmulexBot&platform=telegram&verbose_name=Амулекс&bot_avatar=https://designer.ftrcdn.com/uploads/bot_avatars/Alogo.png&n=55387&c=865",vb:"https://refer.id/?bot=amulex&platform=viber&verbose_name=Амулекс&bot_avatar=https://designer.ftrcdn.com/uploads/bot_avatars/Alogo.png&n=55387&c=865",vk:"https://refer.id/?bot=41569853&platform=vkontakte&verbose_name=Амулекс&vk_app_id=7156066&bot_avatar=https://designer.ftrcdn.com/uploads/bot_avatars/Alogo.png&n=55387&c=865",wa:"https://refer.id/?bot=74992151477&platform=whatsapp&verbose_name=Амулекс&bot_avatar=https://designer.ftrcdn.com/uploads/bot_avatars/Alogo.png&n=55387&text=Отправьте этот текст, чтобы начать чат со специалистом.Персональный номер Вашего чата [[context]]&c=865"};let o="";location.search&&(o=location.search.substring(1)),"undefined"!=typeof utm&&(""===o?o+="&"+utm:(o+="&"+utm,o=JSON.parse('{"'+decodeURI(o).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),o="&"+Object.entries(o).map((([e,t])=>`${e}=${t}`)).join("&")));let i=document.cookie.match("(^|;) ?_ym_uid=([^;]*)(;|$)");i&&(o+="&yandexClientId="+unescape(i[2]));let n=document.cookie.match("(^|;) ?_subid=([^;]*)(;|$)");n&&(o+="&amupr_id="+unescape(n[2])),Object.entries(e).forEach((function([t,i]){e[t]+=o})),t.forEach((function(t){const o=$(".social-buttons .icon-"+t);"call"!==t&&o.attr("href",e[t])}))}),2500);100!==e.widgetSize&&$("#consult").addClass("size-"+e.widgetSize);const o=()=>{s()||(e.autoShow&&$(".social-buttons .social-button, hr").show(),e.showWelcomeText&&$(".consult-welcome-text").fadeIn()),i(),n()};e.welcomeText&&$("#consult .consult-welcome-text").html(e.welcomeText);const i=()=>{if(e.limitBySession>0){let e=getCookie("limitBySession");e?(e=parseInt(e)+1,setCookie("limitBySession",e)):setCookie("limitBySession","1")}},n=()=>{if(e.limitByTime>0){if(!getCookie("limitByTime")){const t=3600*e.limitByTime*1e3,o=(new Date).getTime()+t,i=new Date(o);document.cookie="limitByTime=1; expires="+i.toUTCString()}}},s=()=>(()=>{if(e.limitBySession>0){let t=getCookie("limitBySession");if(t&&t>=e.limitBySession)return!0}return!1})()||(()=>{if(e.limitByTime>0&&getCookie("limitByTime"))return!0;return!1})();let a=!1;if(e.time>0){const t=1e3*e.time;setTimeout((()=>{o()}),t)}e.pagesViewed>0&&(a=!0,(()=>{if(e.pagesViewed>0){const t=getCookie("pagesViewed");if(t&&t>=e.pagesViewed)return!0}return!1})()&&o()),e.timeSite>0&&(a=!0,e.timeSite>0&&setInterval((()=>{let t=getCookie("timeSite");t||(t=0),t++,setCookie("timeSite",t),t>e.timeSite&&(o(),a=!0)}),1e3)),e.closeTab&&(a=!0,document.onmouseleave=function(e){(e=e||window.event).offsetY<0&&o()}),a||o(),$(".consult-button").click((function(){$(".social-buttons .social-button, hr").fadeToggle(),e.autoShow,t.forEach((function(e){$(".social-buttons .text-"+e).hide()}))})),t.forEach((function(e){$(".social-buttons .icon-"+e).hover((function(){$(".social-buttons .text-"+e).fadeIn()}),(function(){$(".social-buttons .text-"+e).hide()}))}))};
